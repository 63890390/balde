language: c

compiler:
  - gcc
  - clang

env:
  - GLIB_VERSION=2.34.3

before_install:
  - sudo apt-get install -y libfcgi-dev
  - wget http://ftp.gnome.org/pub/gnome/sources/glib/2.34/glib-$GLIB_VERSION.tar.xz
  - tar -xvf glib-$GLIB_VERSION.tar.xz -C ~
  - mkdir -p ~/glib/build
  - pushd ~/glib/build > /dev/null && ~/glib-$GLIB_VERSION/configure && popd > /dev/null
  - make -C ~/glib/build

install:
  - sudo make -C ~/glib/build install

script:
  - export BALDE_DIR="$(pwd)"
  - ./autogen.sh
  - mkdir -p ~/balde-build
  - pushd ~/balde-build > /dev/null && $BALDE_DIR/configure --enable-examples && popd > /dev/null
  - make -C ~/balde-build check
